{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9fcfb3b453532f2edc8d","webpack:///./src/js/expand.js","webpack:///./src/js/query-all.js","webpack:///./src/js/utils.js"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_utils","expandObjectsMap","setIsInitialState","element","initialState","arguments","length","undefined","updateState","refreshState","expandObj","controllerElements","forEach","controllerElement","expanded","controlledElement","window","requestAnimationFrame","dispatchEvent","Event","preventScrollToAnchor","controlledID","setAttribute","changeExpandedState","addController","push","expandIfAnchored","document","querySelector","error","createExpand","getAttribute","getElementById","defaultState","controlledRole","documentElement","addEventListener","event","reduce","prev","curr","isOrContains","target","addExpand","ID","_queryAll2","default","selectorString","context","Array","slice","querySelectorAll","container","contains","attribute","targetState"],"mappings":"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","file":"expand.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"expand\"] = factory();\n\telse\n\t\troot[\"expand\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9fcfb3b453532f2edc8d","import queryAll from './query-all';\r\nimport { isOrContains, updateState } from './utils';\r\n\r\nconst expandObjectsMap = {};\r\n\r\nconst setIsInitialState = (element, initialState = false) => {\r\n  updateState(element, 'data-initial-state', initialState ? 'true' : 'false');\r\n};\r\n\r\nconst refreshState = (expandObj, initialState = false) => {\r\n  expandObj.controllerElements.forEach(controllerElement => {\r\n    updateState(controllerElement, 'aria-pressed', expandObj.expanded ? 'true' : 'false');\r\n    setIsInitialState(controllerElement, initialState);\r\n  });\r\n\r\n  updateState(expandObj.controlledElement, 'aria-expanded', expandObj.expanded ? 'true' : 'false');\r\n\r\n  setIsInitialState(expandObj.controlledElement, initialState);\r\n\r\n  if (window.requestAnimationFrame) {\r\n    window.requestAnimationFrame(() => {\r\n      window.dispatchEvent(new Event('resize'));\r\n    })\r\n  }\r\n};\r\n\r\nconst preventScrollToAnchor = expandObj => {\r\n  const controlledID = expandObj.controlledID;\r\n\r\n  if (expandObj.expanded === false) {\r\n    expandObj.controlledElement.setAttribute('id', '');\r\n    window.requestAnimationFrame(() => {\r\n      expandObj.controlledElement.setAttribute('id', controlledID);\r\n    });\r\n  }\r\n};\r\n\r\nconst changeExpandedState = expandObj => {\r\n  expandObj.expanded = !expandObj.expanded;\r\n\r\n  refreshState(expandObj);\r\n\r\n  preventScrollToAnchor(expandObj);\r\n};\r\n\r\nconst addController = (expandObj, element) => {\r\n  expandObj.controllerElements.push(element);\r\n\r\n  element.setAttribute('aria-controls', expandObj.controlledID);\r\n};\r\n\r\nconst expandIfAnchored = expandObj => {\r\n  try {\r\n    // Will not work on old IEs\r\n    if (window.document.querySelector(':target') === expandObj.controlledElement) {\r\n      changeExpandedState(expandObj);\r\n    }\r\n  }\r\n  catch (error) {\r\n    // Todo\r\n  }\r\n};\r\n\r\nconst createExpand = controllerElement => {\r\n  const controlledID = controllerElement.getAttribute('data-controls');\r\n  const controlledElement = window.document.getElementById(controlledID);\r\n  const defaultState = controllerElement.getAttribute('data-expand-default-state') === 'true';\r\n  const controlledRole = controlledElement.getAttribute('role');\r\n\r\n  const expandObj = {\r\n    controllerElements: [],\r\n    controlledElement: controlledElement,\r\n    controlledID: controlledID,\r\n    defaultState: defaultState,\r\n    expanded: defaultState\r\n  };\r\n\r\n  const controllerElements = expandObj.controllerElements;\r\n\r\n  expandObj.controlledElement.setAttribute('role', controlledRole ? controlledRole : 'region');\r\n\r\n  window.document.documentElement.addEventListener('click', event => {\r\n    const controllerElem = controllerElements.reduce(\r\n      (prev, curr) => (isOrContains(curr, event.target) ? curr : prev),\r\n      null\r\n    );\r\n\r\n    if (controllerElem) {\r\n      changeExpandedState(expandObj);\r\n    }\r\n  });\r\n\r\n  refreshState(expandObj, true);\r\n\r\n  addController(expandObj, controllerElement);\r\n\r\n  refreshState(expandObj, false);\r\n\r\n  expandIfAnchored(expandObj);\r\n\r\n  return expandObj;\r\n};\r\n\r\nexport const addExpand = controllerElement => {\r\n  const ID = controllerElement.getAttribute('data-controls');\r\n\r\n  if (expandObjectsMap[ID]) {\r\n    addController(expandObjectsMap[ID], controllerElement);\r\n  }\r\n  else {\r\n    expandObjectsMap[ID] = createExpand(controllerElement);\r\n  }\r\n};\r\n\r\nqueryAll('[data-expand]').forEach(addExpand);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/expand.js","export default (selectorString, context) => {\r\n  var element = context || document;\r\n  return Array.prototype.slice.call(element.querySelectorAll(selectorString));\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/query-all.js","export const isOrContains = (container, element) =>\r\n    container === element || container.contains(element);\r\n\r\nexport const updateState = (element, attribute, targetState) => {\r\n  if (element.getAttribute(attribute) !== targetState) {\r\n    element.setAttribute(attribute, targetState);\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils.js"],"sourceRoot":""}